---
title: "Water Data"
output:
  flexdashboard::flex_dashboard:
    social: menu
    source_code: https://github.com/ucd-cwee/greengov-challenge
runtime: shiny
---

```{r setup, include=FALSE}
library(flexdashboard, quietly = TRUE)
library(rgdal, quietly = TRUE)

# water district boundary
water_dist <- readRDS('data/water_dist.rds')

# water use summary
water_use <- readRDS('data/water_use.rds')

# load and call modules
source('modules/water_district_map.R')

util <- callModule(waterDistMap, "water_districts", map_data = water_dist,
                     water_data = water_use, id_field = 'PWSID_1', name_field = 'Supplier_Name', date_field = 'date')
```

Sidebar {.sidebar}
=======================================================================

### Water Utilities

```{r}
waterDistMapInput('water_districts')
```


Conservation
=======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### {.nopadding}

```{r}
waterDistMapOutput('water_districts')
```

Column {data-width=350}
-----------------------------------------------------------------------

### Water Savings {.value-box}

```{r}
# water savings
renderValueBox({
  valueBox(value = util())
})
```

### GHG Emissions {.value-box}

```{r}
# GHG emissions
renderValueBox({
  valueBox(value = NULL)
})
```


### {.nopadding}

```{r}

```

### {.nopadding}

```{r}

```


Water Quality
=======================================================================

### Water Quality

